doctype html
html(lang="en")
    head
        title Document
        script(src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js")
        
        link(rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous")
        script(src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous")  


    body
        
        h1 Welcome to the survey!
        
        h2 Input your name
            br
            input(type="text", value = "test", name="name", required)
        h2 Put a link to your photo
            br
            input(type="text", value = "test", name="photo", required)
        h2 This is the first question
            br
            select(required, name="q1")
                   
                option(value=1) Strongly Disagree
                option(value=2) Moderately Disagree
                option(value=3) Somewhere in the middle
                option(value=4) Moderately Agree
                option(value=5) Strongly Agree
        h2 This is the second question
            br
            select(required, name="q2")
            
                option(value=1) Strongly Disagree
                option(value=2) Moderately Disagree
                option(value=3) Somewhere in the middle
                option(value=4) Moderately Agree
                option(value=5) Strongly Agree
        h2 This is the third question
            br
            select(required, name="q3")
            
                option(value=1) Strongly Disagree
                option(value=2) Moderately Disagree
                option(value=3) Somewhere in the middle
                option(value=4) Moderately Agree
                option(value=5) Strongly Agree
        h2 This is the fourth question
            br
            select(required, name="q4")
            
                option(value=1) Strongly Disagree
                option(value=2) Moderately Disagree
                option(value=3) Somewhere in the middle
                option(value=4) Moderately Agree
                option(value=5) Strongly Agree
        h2 This is the fifth question
            br
            select(required, name="q5")
            
                option(value=1) Strongly Disagree
                option(value=2) Moderately Disagree
                option(value=3) Somewhere in the middle
                option(value=4) Moderately Agree
                option(value=5) Strongly Agree
        h2 This is the sixth question
            br
            select(required, name="q6")
            
                option(value=1) Strongly Disagree
                option(value=2) Moderately Disagree
                option(value=3) Somewhere in the middle
                option(value=4) Moderately Agree
                option(value=5) Strongly Agree
        h2 This is the seventh question
            br
            select(required, name="q7")
            
                option(value=1) Strongly Disagree
                option(value=2) Moderately Disagree
                option(value=3) Somewhere in the middle
                option(value=4) Moderately Agree
                option(value=5) Strongly Agree
        h2 This is the eigth question
            br
            select(required, name="q8")
            
                option(value=1) Strongly Disagree
                option(value=2) Moderately Disagree
                option(value=3) Somewhere in the middle
                option(value=4) Moderately Agree
                option(value=5) Strongly Agree
        h2 This is the ninth question
            br
            select(required, name="q9")
            
                option(value=1) Strongly Disagree
                option(value=2) Moderately Disagree
                option(value=3) Somewhere in the middle
                option(value=4) Moderately Agree
                option(value=5) Strongly Agree
        h2 This is the tenth question
            br
            select(required, name="q10")
                
                option(value=1) Strongly Disagree
                option(value=2) Moderately Disagree
                option(value=3) Somewhere in the middle
                option(value=4) Moderately Agree
                option(value=5) Strongly Agree
        button#submit(onclick="matchFunction()" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter") Find your match!  
        div#exampleModalCenter(class="modal fade" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true")
            div(class="modal-dialog modal-dialog-centered" role="document")
                div(class="modal-content")
                    div(class="modal-header")
                        h5(class="modal-title" id="exampleModalLongTitle") You matched with...
                        button(type="button" class="close" data-dismiss="modal" aria-label="close")
                            span(aria-hidden="true") &times;
                    div(class="modal-body")
                        img#matchPic(src="" width="100%" height="100%")
                    div(class="modal-footer w-100")
                        p#matchName(class="text-left w-100" font-weight="bold")
                        button(type="button" class="btn btn-secondary" data-dismiss="modal") Close
        script.

            function matchFunction(e) {

                var q1 = document.getElementsByName("q1")[0].value;
                var q2 = document.getElementsByName("q2")[0].value;
                var q3 = document.getElementsByName("q3")[0].value;
                var q4 = document.getElementsByName("q4")[0].value;
                var q5 = document.getElementsByName("q5")[0].value;
                var q6 = document.getElementsByName("q6")[0].value;
                var q7 = document.getElementsByName("q7")[0].value;
                var q8 = document.getElementsByName("q8")[0].value;
                var q9 = document.getElementsByName("q9")[0].value;
                var q10 = document.getElementsByName("q10")[0].value;
                var name = document.getElementsByName("name")[0].value;
                var photo = document.getElementsByName("photo")[0].value;
                fetch("/api/friends", {
                    method: "POST",
                    body: JSON.stringify({
                        scores: [q1, q2, q3, q4, q5, q6, q7, q8, q9, q10]
                    }),
                    headers: {
                        "Content-Type": "application/json",

                            }
                })
                .then(function(res) {
                    return res.json()
                })
                .then(function(res) {
                    console.log('Success:', JSON.stringify(res.photo))
                    document.getElementById("matchPic").src = res.photo
                    document.getElementById("matchName").innerText = res.name
                    
                })
                .catch(function(error) {
                    console.log(error);
                })
            }
        //- script(type="text/javascript" src="app/routing/apiRoutes.js")                 
